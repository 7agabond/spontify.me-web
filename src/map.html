<html>

<head>
	<title>findapp &middot; locations map</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript">
		var info = null;
		var map = null;
		function initMap(data, lat, lng, zoom, googleScript) {
			var script = document.createElement('script');
			script.onload = function () {
				var geocoder = new google.maps.Geocoder();
				map = new google.maps.Map(document.getElementById("map_canvas"),
					{ zoom: zoom, center: new google.maps.LatLng(lat, lng), mapTypeId: google.maps.MapTypeId.ROADMAP });
				for (var i = 0; i < data.length; i++) {
					var img = '';
					if (data[i].img)
						img = '<img src="' + data[i].img + '" style="height:6em;border-radius:0.5em;margin-right:1em;"/>';
					data[i].contentString = img + '<div style="float:right;"><b>' + data[i].title + '</b><br/>' + data[i].address.replace(/\u0015/g, '<br/>') + '<br/>' + data[i].desc.replace(/\u0015/g, '</div>');
					addMarker(data[i], i);
				}
			};
			script.src = googleScript;
			document.head.appendChild(script);
		}
		function addMarker(d, i) {
			setTimeout(function () {
				var marker = new google.maps.Marker({ map: map, title: d.title, contentString: d.contentString, icon: 'images/mapLoc.png', position: new google.maps.LatLng(d.lat, d.lng), animation: google.maps.Animation.DROP });
				google.maps.event.addListener(marker, 'click', openInfo);
			}, 200 * i);
		}
		function openInfo() {
			if (info)
				info.close();
			info = new google.maps.InfoWindow({ content: this.contentString });
			info.open(map, this);
		}
	</script>
</head>

<body style="margin:0;">
	<div id="map_canvas" style="width:100%;height:100%;"></div>
</body>

</html>